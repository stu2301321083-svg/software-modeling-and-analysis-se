ğŸ  RealEswipe â€” Database Features

ğŸ“Œ Project Overview

RealEswipe is a real estate booking platform that connects users, apartments, listings, and bookings.
The database is designed to support apartment availability matching, booking logic, and review management with automated business rules implemented directly at the database level.

The system uses Microsoft SQL Server and includes tables, relationships, one function, one stored procedure, and one trigger, as required.

â¸»

ğŸ—‚ Database Structure (High Level)

The database contains the following main entities:
	â€¢	User â€“ platform users (tenants, owners, moderators)
	â€¢	Apartment â€“ physical properties listed on the platform
	â€¢	Listing â€“ rental offers for apartments
	â€¢	Form â€“ user applications for renting
	â€¢	Match â€“ availability matches between forms and listings
	â€¢	Booking â€“ confirmed reservations
	â€¢	Review â€“ user feedback after booking
	â€¢	Moderator â€“ users responsible for apartment verification
	â€¢	User_Form â€“ many-to-many relationship between users and forms

The model includes:
	â€¢	One-to-many relationships
	â€¢	Many-to-many relationship (User â†” Form)
	â€¢	Business logic enforced at database level

â¸»

âš™ï¸ Key Database Features

1ï¸âƒ£ Date Overlap Validation Function

Function:
real_eswipe.dates_overlap

Purpose:
Checks whether two date ranges overlap.

Why it is important:
This function is used to determine apartment availability when creating bookings and to prevent double bookings for overlapping dates.

Logic (conceptual):
	â€¢	Accepts two date ranges
	â€¢	Returns TRUE if the periods overlap
	â€¢	Returns FALSE otherwise

Usage example:

SELECT real_eswipe.dates_overlap(
    '2025-12-01', '2025-12-05',
    '2025-12-03', '2025-12-10'
);


â¸»

2ï¸âƒ£ Booking Creation Stored Procedure

Stored Procedure:
real_eswipe.sp_create_booking

Purpose:
Creates a new booking in a controlled and consistent way.

What it does:
	â€¢	Calculates booking duration automatically
	â€¢	Inserts a new booking record
	â€¢	Triggers post-booking logic (status updates)

Why it is important:
Encapsulates booking logic in one place and prevents inconsistent inserts.

Usage example:

EXEC real_eswipe.sp_create_booking
    @listing_id = 1,
    @match_id = 36,
    @start_date = '2025-12-10',
    @end_date = '2025-12-15';


â¸»

3ï¸âƒ£ Automatic Match Status Update Trigger

Trigger:
trg_update_match_status_after_booking

Activated:
After a new booking is inserted.

Purpose:
Automatically updates match statuses based on booking dates.

Trigger behavior:
	â€¢	Sets the booked match status to booked
	â€¢	Finds all other matches for the same apartment with overlapping dates
	â€¢	Updates their status to unavailable

Why it is important:
Guarantees data consistency and prevents overlapping bookings without requiring application-level logic.

â¸»

ğŸ” Data Integrity Rules

The database enforces the following rules:
	â€¢	One apartment cannot be booked for overlapping periods
	â€¢	Only existing matches can be converted into bookings
	â€¢	Reviews can be written only for existing bookings
	â€¢	Apartment availability is controlled automatically via trigger logic

â¸»

ğŸ“Š Reporting & Analytics Ready

The database is fully compatible with Power BI and supports:
	â€¢	Average rating per apartment
	â€¢	Average price by rental type
	â€¢	Number of bookings per apartment
	â€¢	KPI cards (total users, listings, reviews)

â¸»

âœ… Academic Requirements Coverage

âœ” Minimum 6 entities
âœ” More than 30 attributes
âœ” One many-to-many relationship
âœ” One function
âœ” One stored procedure
âœ” One trigger
âœ” Business logic implemented in SQL Server

